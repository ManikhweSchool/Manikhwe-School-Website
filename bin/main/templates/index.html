<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="ISO-8859-1">
        
	    <!--<link rel="stylesheet" 
	    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" 
	    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
	    crossorigin="anonymous">-->
	    
	    <link rel = "stylesheet" th:href="@{/css/bootstrap-4.3.1-dist/css/bootstrap.min.css}"></link>
	    
	    <link rel = "stylesheet" th:href="@{/css/index.css}"></link>
        
        <title>Home</title>
          
	    <style type="text/css">
	    	label{
	    		color : navy;
	    	}
	    	.controllable{
	    		display:inline;
	    	}
	    </style>
    </head>
    <body>
    	
        <div class = "container-fluid">
            <!--The on hover css property i can't use, reason being i don't know how.-->
            <div class = "row">
				<div class = "col-md-12">
		           <ul id = "Header_Items">		
		              <li class = "Header_Item"><a href = "#" th:href = "@{/index}" class = "Header_Link"  style = "color : white;">Home</a></li>
		              <li class = "Header_Item"><a href = "Background.html" th:href = "@{/background}" class = "Header_Link" target = "_blank">Background</a></li>
		              <li class = "Header_Item"><a href = "ContactInfo.html" th:href = "@{/contact}" class = "Header_Link" target = "_blank">Contacts</a></li>
		              <li class = "Header_Item"><a href="IntroToJava.html" th:href =  "@{/java}" class = "Header_Link">Java</a></li>
		              <li class = "Header_Item"><a href="IntroToPython.html" th:href =  "@{/python}" class = "Header_Link">Python</a></li>
		              <li class = "Header_Item"><a href="Games.html" th:href = "@{/dart}" class = "Header_Link">Dart</a></li>
		              <li class = "Header_Item"><a href = "Login.html" th:href = "@{/signin}" id="SignIn_Page_Link" class = "Header_Link">Login/SignIn</a></li>
		              
		          </ul>         
				</div>
            </div>
        
        <div id = "searching" class = "row mt-3">
        	<div class = "col-md-5 col-sm-12">
        		<h4>
        		<label>Search Artist : 
	        		<input type="text" name = "artistsearch" width ="100"
	        		placeholder="Search By Artist Name"/>
        		</label>
        		</h4>
        	</div>
        	<div class = "col-md-2 col-sm-12">
        		<a 
        		href="https://accounts.spotify.com:443/authorize?client_id=bac757d75af0458e9eda632244424997&redirect_uri=https%3A%2F%2Fwww.manikhweschool.com%2Fspotifyredirect&response_type=code&show_dialog=true&scope=user-read-recently-played%2Cuser-top-read%2Cplaylist-read-private%2Cuser-library-read%2Cplaylist-read-collaborative%2Cuser-read-email">
        		
        			<img th:src="@{/images/spotify/spotify-1.png}"
        			width = "50%"/>
        			
        		</a>
        	</div>
        	<div class = " col-md-5 col-sm-12">
        		<h4>
        		<label>Search Album : 
	        		<input type="text" name = "albumsearch" width ="100"
	        		placeholder="Search By Album Name"/>
        		</label>
        		</h4>
        	</div>
        </div>
        
        <!--<div class = "row mt-3" id="rhythm-area">
	        <div class = "offset-md-1 col-md-4 offset-sm-1 col-sm-2 mr-0">
	        	<label style="text-align:justify">
	        		<strong>
	        		To Begin With, Make Sure That You Have Chosen A Track From Any List Below. 
	        		After Choosing A Track You Can Then Play It As It Appears On The
	        		Right. Now You Ready To Create A Rhythm By Continuously Pressing 
	        		The Clap Button For Every Clap As Your Favorite Music Is Playing. 
	        		<span style="color:green">Press Zero To Indicate The Created Pattern So Far Is Recurring Or 
	        		You Done.</span> Lastly, Press The Test Rhythm Button To See If The Balls 
	        		Movement Correspond Precisely With The Rhythm Of Music. 
	        		</strong>
	        	</label>
	        </div>
	        <div class = "col-md-3 offset-sm-1 col-sm-2 mx-0" id="rhythm-area">
	        	
	        	<audio src="https://api.spotify.com/v1/tracks/3f9zqUnrnIq0LANhmna" id="gameTrack"
				controls width="100%"></audio>
	        	<textarea rows="5" cols="40" id="rhythm-space"></textarea>
	        	<button id="clapButton"
	        	class = "btn btn-outline-primary m-0"
	        	style="padding-left: 44%;padding-right: 44%">
	        	Clap</button>
	        	
	        </div>
	        <div class = "col-md-4 offset-sm-1 col-sm-2 ml-0" id="rhythm-area">
	        	<label style="text-align:justify">
	        		<strong>
	        		
		        		As You Test Your Rhythm You Might Need To Shift It 
		        		Forward Or Backwards. That Is Where The Shift Buttons Come In To Play. 
		        		One Click On Either Buttons Shift A Rhythm 100 Milliseconds Relative To It
		        		Current Starting Time, So 'n' Clicks Result In n*100 Milliseconds Shift. 
		        		Once You Have An Accurate Rhythm, Select The Checkbox And Then Click The
		        		Start Game Server Button In Order To Save It.
		        		<span style="color : red;">
		        		Note Creating Inaccurate Rhythm(s) Might Get You Suspended.</span>
	        		</strong>
	        	</label>
	        </div>
        </div>-->
        <div id = "music-action" class = "row mt-3">
        	<div class = "col-md-2 col-sm-10 mr-0">
        		<h6>
        		<label>No Of Rhythm Trackers : 
	        		<select name="number-of-players">
	        			
	        			<option value="2">Two Players</option>
	        			<option value="3">Three Players</option>
	        			<option value="4">Four Players</option>
	        			<option value="5">Five Players</option>
	        			<option value="6">Six Players</option>
	        			<option value="7">Seven Players</option>
	        			<option value="8">Eight Players</option>
	        			<option value="9">Nine Players</option>
	        			<option value="10">Ten Players</option>
	        			
	        		</select>
        		</label>
        		</h6>
        	</div>
        	
        	<div class = "col-md-8 offset-sm-1 col-sm-2 mx-0">
        		<button
        		class = "controllable btn btn-outline-primary m-0">
        		Shift Rhythm Left</button>
        		<button id="createRhythmButton"
        		
        		class = "controllable btn btn-outline-primary m-0">
        		Create Rhythm</button>
        		<button id="rhythmTesterButton"
        		class = "controllable btn btn-outline-primary m-0">
        		Test Rhythm</button>
        	
        		<label class="controllable">
        			
        			<strong>Rhythm Fit?</strong>
        			<input type="checkbox" name="rhythmfit">
        			
        		</label>
        		<button
        		class = "controllable btn btn-outline-primary m-0">
        		Start Game Server</button>
        		<button 
        		class = "musicbutton btn btn-outline-primary m-0">
        		Shift Rhythm Right</button>	
        	</div>
        	
        	<div class = "col-md-1 ml-0">
        		<h6>
        		<label>Game Unique Code : 
	        		<input type="text" name = "Game Id" width ="100"
	        		placeholder="Choose any 10 digits"/>
        		</label>
        		</h6>
        	</div>
        </div>
		<div class = "row mt-3">
				<div class = "col-md-3 col-sm-12">
					<div class = "area" style="position:relative;">
						<div style="position:absolute;" th:object="${albumsPage}">
						<a th:href="@{/prevonalbums}"style="padding-left:10.8%;padding-right:10.8%;" >Prev Page</a>
						<a th:href="@{/nextonalbums}" style="padding-left:10.8%;padding-right:10.8%;right:0">Next Page</a>
						<!--<button th:each="track : ${albumsPage.pageTracks}"
						th:text="${track}" style="width:100%;text-align:left;"
						class = "controllable btn btn-outline-primary m-0">
							Track Information
						</button>-->
						</div>
					</div>
				</div>
				<div id = "balls-div" class = "col-md-6 mx-0 col-sm-12">
					<table style = "height:100%;" class = "table  table-primary table-stripped">
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball00" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball01" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball02" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball03" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball04" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball05" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball06" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball07" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball08" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball10" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball11" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball12" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball13" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball14" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball15" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball16" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball17" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball18" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball20" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball21" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball22" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball23" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball24" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball25" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball26" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball27" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball28" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball30" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball31" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball32" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball33" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball34" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball35" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball36" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball37" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball38" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball40" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball41" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball42" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball43" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball44" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball45" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball46" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball47" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball48" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball50" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball51" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball52" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball53" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball54" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball55" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball56" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball57" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball58" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball60" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball61" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball62" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball63" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball64" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball65" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball66" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball67" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball68" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball70" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball71" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball72" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball73" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball74" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball75" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball76" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball77" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball78" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
						<tr class="">
							<td><button style = "height:100%;border-radius: 50%;" id = "ball80" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball81" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball82" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball83" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball84" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball85" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball86" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
							<td><button style = "height:100%;border-radius: 50%;" id = "ball87" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
                            <td><button style = "height:100%;border-radius: 50%;" id = "ball88" class = "ball btn btn-lg btn-outline-primary m-0"></button></td>
						</tr>
					</table>
				</div>
				<div class = "col-md-3 col-sm-12">
		            <div class = "area" style="position:relative;">
						<div style="position:absolute;" th:object="${albumsPage}">
						<a th:href="@{/prevonalbums}"style="padding-left:10.8%;padding-right:10.8%;" >Prev Page</a>
						<a th:href="@{/nextonalbums}" style="padding-left:10.8%;padding-right:10.8%;right:0">Next Page</a>
						<!--<button th:each="track : ${albumsPage.pageTracks}"
						th:text="${track}" style="width:100%;text-align:left;"
						class = "controllable btn btn-outline-primary m-0">
							Track Information
						</button> -->	
						</div>
					</div>
				</div>
            </div>	
		</div>
    </body>
    <script th:src = "@{/js/gsap-public/gsap-public/minified/gsap.min.js}" type = "text/javascript"></script>
    <script th:src="@{/js/jquery/jquery-3.4.1.js}"></script>
    
    <!--<script src=â€œhttps://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>-->
    
    <script> 
			
		$("document").ready(function(){
			$("#rhythm-area").hide();
            /*var timeline1 = gsap.timeline({defaults: {ease:"power2. out"}});
            timeline1.from('#Header_Items',{duration: 1.5, y:-80});

            var timeline2 = gsap.timeline({defaults: {ease:"power2. out"}});
            timeline2.from('#searching',{duration: 3.0, x:2000});

            let timeline3 = gsap.timeline({defaults: {ease:"power2. out"}});
            timeline3.from('#music-action',{duration: 3.0, x:-2000});*/

            
            var ballsIds = new Array();
            

			var firstQuadrantBalls = [];
			var secondQuadrantBalls = [];
			var thirdQuadrantBalls = [];
			var forthQuadrantBalls = [];
			
			var path = new Array(); 
			
			var middleBalls = [];
			var middleBallsPortionIndex = 0;
			var middleBallsPortionCases = [1,2,3,4,3,2];
			var middleBallsColor = "middle-balls-color";

			var quadrantBalls = [];

			init();

			var ballsDuration = 0.1; // Single step speed.
			var rhythmStartingTime;
			var rhythm = [];//  Total number of claps making up a rhythm is the rhythm size.

			function fillMiddleBalls(){
				
				middleBallsPortionIndex++;
				
				middleBalls = [];
				switch(middleBallsPortionCases[middleBallsPortionIndex%6]){
				case 1 :
					middleBalls[0] = '#ball' + 44;
					break;
				case 2 :
					middleBalls[0] = '#ball' + 33;
					middleBalls[1] = '#ball' + 34;
					middleBalls[2] = '#ball' + 35;
					
					middleBalls[3] = '#ball' + 45;
					
					middleBalls[4] = '#ball' + 55;
					middleBalls[5] = '#ball' + 54;
					middleBalls[6] = '#ball' + 53;
					
					middleBalls[7] = '#ball' + 43;
					
					break;
				case 3 :
					
					for(var column = 2; column <=6;column++)
						middleBalls[column-2] = '#ball' + 2 + column;
					
					middleBalls[5] = '#ball' + 36; 
					middleBalls[6] = '#ball' + 46; 
					middleBalls[7] = '#ball' + 56; 
					
					for(var column = 6; column>=2;column--)
						middleBalls[middleBalls.length] = '#ball' + 6 + column;
					
					middleBalls[middleBalls.length] = '#ball' + 52; 
					middleBalls[middleBalls.length] = '#ball' + 42; 
					middleBalls[middleBalls.length] = '#ball' + 32; 
					break;
				case 4:
					for(var column = 1; column <=7;column++)
						middleBalls[column-1] = '#ball' + 1 + column;
					
					middleBalls[middleBalls.length] = '#ball' + 27; 
					middleBalls[middleBalls.length] = '#ball' + 37; 
					middleBalls[middleBalls.length] = '#ball' + 47;
					middleBalls[middleBalls.length] = '#ball' + 57;
					middleBalls[middleBalls.length] = '#ball' + 67;
					
					for(var column = 7; column>=1;column--)
						middleBalls[middleBalls.length] = '#ball' + 7 + column;
					
					middleBalls[middleBalls.length] = '#ball' + 61; 
					middleBalls[middleBalls.length] = '#ball' + 51; 
					middleBalls[middleBalls.length] = '#ball' + 41;
					middleBalls[middleBalls.length] = '#ball' + 31;
					middleBalls[middleBalls.length] = '#ball' + 21;
				}
				
				for(var index = 0; index < middleBalls.length;index++)
					$(middleBalls[index]).addClass(middleBallsColor);
					
			}
			
			function createMiddleBallsTimeline(){

				if($(middleBalls[0]).hasClass('middle-balls-color')){

					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var middleBallsTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);
						middleBallsTimeline.addLabel("clapTime",rhythm[clapIndex]);

						for(var myIndex = 0; myIndex < middleBalls.length;myIndex++)
							middleBallsTimeline.to(middleBalls[myIndex],{backgroundColor: '#b8daff'}, "clapTime");
						fillMiddleBalls();
						for(var myIndex = 0; myIndex < middleBalls.length;myIndex++)
							middleBallsTimeline.to(middleBalls[myIndex],{backgroundColor: 'darkturquoise'}, "clapTime");
					}
				}
			}

			function startAnimating(){

				createFirstQuadrantTimeline();
				createSecondQuadrantTimeline();
				createThirdQuadrantTimeline();
				createForthQuadrantTimeline();
				createMiddleBallsTimeline();
			}

			function createRhythm(){

				var numberOfClaps = 100 + parseInt(Math.random()*100);
				var rhythm = [];
				var sum = 0;

				for(var clapIndex = 0; clapIndex < numberOfClaps;clapIndex++){
					sum += 1;
					rhythm[clapIndex] = sum;
				}

				return rhythm;

			}

			function createFirstQuadrantTimeline(){

				var firstQuadrantNextId = moveQuadrantBalls(firstQuadrantBalls, firstQuadrantBalls.length);

				if($(firstQuadrantBalls[firstQuadrantBalls.length-1]).hasClass('color-one')){

					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var firstQuadrantTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);
						firstQuadrantTimeline.addLabel("clapTime",rhythm[clapIndex]);

						firstQuadrantTimeline.to(firstQuadrantNextId,{backgroundColor: 'blue'}, "clapTime");
						firstQuadrantTimeline.to(firstQuadrantBalls[0],{backgroundColor: '#b8daff'}, "clapTime");
						
						updateQuadrantBalls(firstQuadrantBalls, firstQuadrantNextId);
						firstQuadrantNextId = moveQuadrantBalls(firstQuadrantBalls, firstQuadrantBalls.length);
					}
				}
				else if($(firstQuadrantBalls[firstQuadrantBalls.length-1]).hasClass('color-two')){
					
					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var firstQuadrantTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);
						firstQuadrantTimeline.addLabel("clapTime",rhythm[clapIndex]);
						firstQuadrantTimeline.to(firstQuadrantNextId,{backgroundColor: ' hsl(250, 30%, 30% )'}, "clapTime");
						firstQuadrantTimeline.to(firstQuadrantBalls[0],{backgroundColor: '#b8daff'}, "clapTime");

						updateQuadrantBalls(firstQuadrantBalls, firstQuadrantNextId);
						firstQuadrantNextId = moveQuadrantBalls(firstQuadrantBalls, firstQuadrantBalls.length);
					}
				}
			}
			
			function createSecondQuadrantTimeline(){

				var secondQuadrantNextId  = moveQuadrantBalls(secondQuadrantBalls, secondQuadrantBalls.length);
				
				if($(secondQuadrantBalls[secondQuadrantBalls.length-1]).hasClass('color-one')){
					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var secondQuadrantTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);
						secondQuadrantTimeline.addLabel("clapTime",rhythm[clapIndex]);
						secondQuadrantTimeline.to(secondQuadrantNextId,{backgroundColor: 'blue'}, "clapTime");
						secondQuadrantTimeline.to(secondQuadrantBalls[0],{backgroundColor: '#b8daff'}, "clapTime");

						updateQuadrantBalls(secondQuadrantBalls, secondQuadrantNextId);
						secondQuadrantNextId = moveQuadrantBalls(secondQuadrantBalls, secondQuadrantBalls.length);
					}
				}
				else if($(secondQuadrantBalls[secondQuadrantBalls.length-1]).hasClass('color-two')){
					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var secondQuadrantTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);
						secondQuadrantTimeline.addLabel("clapTime",rhythm[clapIndex]);
						secondQuadrantTimeline.to(secondQuadrantNextId,{backgroundColor: ' hsl(250, 30%, 30% )'}, "clapTime");
						secondQuadrantTimeline.to(secondQuadrantBalls[0],{backgroundColor: '#b8daff'}, "clapTime");

						updateQuadrantBalls(secondQuadrantBalls, secondQuadrantNextId);
						secondQuadrantNextId = moveQuadrantBalls(secondQuadrantBalls, secondQuadrantBalls.length);
					}
					
				}
			}

			function createThirdQuadrantTimeline(){

				var thirdQuadrantNextId = moveQuadrantBalls(thirdQuadrantBalls, thirdQuadrantBalls.length);

				if($(thirdQuadrantBalls[thirdQuadrantBalls.length-1]).hasClass('color-one')){

					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var thirdQuadrantTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);
						thirdQuadrantTimeline.addLabel("clapTime",rhythm[clapIndex]);
						thirdQuadrantTimeline.to(thirdQuadrantNextId,{backgroundColor: 'blue'}, "clapTime");
						thirdQuadrantTimeline.to(thirdQuadrantBalls[0],{backgroundColor: '#b8daff'}, "clapTime");

						updateQuadrantBalls(thirdQuadrantBalls, thirdQuadrantNextId);
						thirdQuadrantNextId = moveQuadrantBalls(thirdQuadrantBalls, thirdQuadrantBalls.length);

					}
					
				}
				else if($(thirdQuadrantBalls[thirdQuadrantBalls.length-1]).hasClass('color-two')){
					
					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var thirdQuadrantTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);
						thirdQuadrantTimeline.addLabel("clapTime",rhythm[clapIndex]);
						thirdQuadrantTimeline.to(thirdQuadrantNextId,{backgroundColor: ' hsl(250, 30%, 30% )'}, "clapTime");
						thirdQuadrantTimeline.to(thirdQuadrantBalls[0],{backgroundColor: '#b8daff'}, "clapTime");

						updateQuadrantBalls(thirdQuadrantBalls, thirdQuadrantNextId);
						thirdQuadrantNextId = moveQuadrantBalls(thirdQuadrantBalls, thirdQuadrantBalls.length);

					}
				}
			}

			function createForthQuadrantTimeline(){

				var forthQuadrantNextId = moveQuadrantBalls(forthQuadrantBalls, forthQuadrantBalls.length);

				if($(forthQuadrantBalls[forthQuadrantBalls.length-1]).hasClass('color-one')){

					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var forthQuadrantTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);

						forthQuadrantTimeline.addLabel("clapTime",rhythm[clapIndex]);
						forthQuadrantTimeline.to(forthQuadrantNextId,{backgroundColor: 'blue'}, "clapTime");
						forthQuadrantTimeline.to(forthQuadrantBalls[0],{backgroundColor: '#b8daff'}, "clapTime");

						updateQuadrantBalls(forthQuadrantBalls, forthQuadrantNextId);
						forthQuadrantNextId = moveQuadrantBalls(forthQuadrantBalls, forthQuadrantBalls.length);
						
					}
					
				}
				else if($(forthQuadrantBalls[forthQuadrantBalls.length-1]).hasClass('color-two')){
					
					for(var clapIndex = 0; clapIndex  <rhythm.length;clapIndex++){
						var forthQuadrantTimeline = 
						gsap.timeline(
							{
								defaults: {
									duration:ballsDuration
								}
							}
						);

						forthQuadrantTimeline.addLabel("clapTime",rhythm[clapIndex]);
						forthQuadrantTimeline.to(forthQuadrantNextId,{backgroundColor: ' hsl(250, 30%, 30% )'}, "clapTime");
						forthQuadrantTimeline.to(forthQuadrantBalls[0],{backgroundColor: '#b8daff'}, "clapTime");

						updateQuadrantBalls(forthQuadrantBalls, forthQuadrantNextId);
						forthQuadrantNextId = moveQuadrantBalls(forthQuadrantBalls, forthQuadrantBalls.length);
						
					}
					
				}
			}

			function moveQuadrantBalls(quadrantBalls, size){

				var next = -1;

                for(var idIndex = 0; idIndex < path.length;idIndex++){
                    
                    if( (idIndex < path.length-1) &&
                    (quadrantBalls[size-1]==path[idIndex])){
                        next = path[idIndex+1];
                        break;
                    }
                    else if((idIndex == path.length-1) &&
                    (quadrantBalls[size-1]==path[idIndex])){
                        next = path[0];
                        break;
                    }
				}
				nextId = next;
				
				
				return next;

			}

			function updateQuadrantBalls(ballsOnQuadrant, nextId){
				
				if(nextId != -1){

				for(var index = 0; index < ballsOnQuadrant.length-1;index++)
					ballsOnQuadrant[index] = ballsOnQuadrant[index+1];
				ballsOnQuadrant[ballsOnQuadrant.length-1] = nextId;

				}
				
			}

            function createBallsPath(){

                // 00,01,02,03,04,05,06,07,08
                for(var ballId = 0; ballId < 9;ballId++)
                    path[path.length] = "#ball0" + ballId;
                //  18,28,38,48,58,68,78
                for(var ballId = 1; ballId <= 7;ballId++)
                    path[path.length] = '#ball' + ballId + "8";
                // 88,87,86,85,84,83,82,81,80,
                for(var ballId = 8; ballId >= 0;ballId--)
                    path[path.length] = "#ball8" + ballId;
                // 70,60,50,40,30,20,10
                for(var ballId = 7; ballId >= 1;ballId--)
                    path[path.length] = '#ball' + ballId + "0";
            }

            function init(){
				
				for(var indexi = 0; indexi < 9;indexi++)
					for(var indexj = 0; indexj < 9;indexj++)
						ballsIds.push("#ball" + indexi + "" + indexj);
				
				createBallsPath();
				
				groupFirstQuadrantBalls();
				groupSecondQuadrantBalls();
				groupThirdQuadrantBalls();
				groupForthQuadrantBalls();
				
                
				shadeBalls();
				
				for(var index = 0; index < firstQuadrantBalls.length;index++)
					quadrantBalls[quadrantBalls.length] = firstQuadrantBalls[index];
				
				
				quadrantBalls.slice(0);
				for(var index = 0; index < secondQuadrantBalls.length;index++)
					quadrantBalls[quadrantBalls.length] = secondQuadrantBalls[index];
				
				
				quadrantBalls.slice(0);
				for(var index = 0; index < thirdQuadrantBalls.length;index++)
					quadrantBalls[quadrantBalls.length] = thirdQuadrantBalls[index];
				
				
				quadrantBalls.slice(0);
				for(var index = 0; index < forthQuadrantBalls.length;index++)
					quadrantBalls[quadrantBalls.length] = forthQuadrantBalls[index];
               	
			}

            function shadeBalls(){
				
            	fillMiddleBalls();
				switch(parseInt(Math.random()*6)){
				case 0 : 
					shadeFirstQuadrantBalls("color-one");
					shadeSecondQuadrantBalls("color-two");
					shadeThirdQuadrantBalls("color-one");
					shadeForthQuadrantBalls("color-two");
					break;
				case 1 : 
					shadeFirstQuadrantBalls("color-one");
					shadeSecondQuadrantBalls("color-one");
					shadeThirdQuadrantBalls("color-two");
					shadeForthQuadrantBalls("color-two");
					break;
				case 2 : 
					shadeFirstQuadrantBalls("color-two");
					shadeSecondQuadrantBalls("color-one");
					shadeThirdQuadrantBalls("color-two");
					shadeForthQuadrantBalls("color-one");
					break;
				case 3 : 
					shadeFirstQuadrantBalls("color-one");
					shadeSecondQuadrantBalls("color-two");
					shadeThirdQuadrantBalls("color-two");
					shadeForthQuadrantBalls("color-one");
					break;
				case 4 : 
					shadeFirstQuadrantBalls("color-two");
					shadeSecondQuadrantBalls("color-one");
					shadeThirdQuadrantBalls("color-one");
					shadeForthQuadrantBalls("color-two");
					break;
				default : 
					shadeFirstQuadrantBalls("color-two");
					shadeSecondQuadrantBalls("color-two");
					shadeThirdQuadrantBalls("color-one");
					shadeForthQuadrantBalls("color-one");
				}
			}

			function groupFirstQuadrantBalls(){
				
				var index;
				
				for(index = 6; index <= 8; index++)
					firstQuadrantBalls[firstQuadrantBalls.length] = ballsIds[index];
				for(index = 17; index <= 26; index+=9)
					firstQuadrantBalls[firstQuadrantBalls.length] = ballsIds[index];
				
			}

			function shadeFirstQuadrantBalls(color){
				
				for(var index = 0; index < firstQuadrantBalls.length;index++)
					if(color=="color-two"){
                        $(firstQuadrantBalls[index]).addClass("color-two");   
                    }
					else if(color=="color-one")
						$(firstQuadrantBalls[index]).addClass("color-one");
			}

			function groupSecondQuadrantBalls(){
				
				var index;
				
				for(index = 18; index >= 9; index-=9)
					secondQuadrantBalls[secondQuadrantBalls.length] = ballsIds[index];
				for(index = 0; index <= 2; index++)
					secondQuadrantBalls[secondQuadrantBalls.length] = ballsIds[index];
				
			}

			function shadeSecondQuadrantBalls(color){
				
				for(var index = 0; index < secondQuadrantBalls.length;index++)
					if(color=="color-two")
						$(secondQuadrantBalls[index]).addClass("color-two");
					else if(color=="color-one")
						$(secondQuadrantBalls[index]).addClass("color-one");
			}

			function groupThirdQuadrantBalls(){
				
				var index;
				
				for(index = 74; index >= 73; index--)
					thirdQuadrantBalls[thirdQuadrantBalls.length] = ballsIds[index];
				for(index = 72; index >= 54; index-=9)
					thirdQuadrantBalls[thirdQuadrantBalls.length] = ballsIds[index];
				
			}

			function shadeThirdQuadrantBalls(color){
				
				for(var index = 0; index < thirdQuadrantBalls.length;index++)
					if(color=="color-two")
						$(thirdQuadrantBalls[index]).addClass("color-two");
					else if(color=="color-one")
						$(thirdQuadrantBalls[index]).addClass("color-one");
			}

			function groupForthQuadrantBalls(){
				
				var index;
				
				for(index = 62; index <= 80; index+=9)
					forthQuadrantBalls[forthQuadrantBalls.length] = ballsIds[index];
				for(index = 79; index >= 78; index--)
					forthQuadrantBalls[forthQuadrantBalls.length] = ballsIds[index];
				
			}

			function shadeForthQuadrantBalls(color){
				
				for(var index = 0; index < forthQuadrantBalls.length;index++)
					if(color=="color-two")
						$(forthQuadrantBalls[index]).addClass("color-two");
					else if(color=="color-one")
						$(forthQuadrantBalls[index]).addClass("color-one");
			}
			
			var clapButton = document.getElementById("clapButton");
			clapButton.onclick = function() {
				var date = new Date();
				
				rhythm[rhythm.length] = (date.getTime()-rhythmStartingTime)/1000;
				
				$('textarea').append("CLAP ");
			};
			
			var createRhythmButton = document.getElementById("createRhythmButton");
			createRhythmButton.onclick = function(){
				$('#rhythm-area').show();
				rhythmStartingTime = new Date().getTime();// shouldn't be here
			};
			
			var rhythmTester = document.getElementById("rhythmTesterButton");
			rhythmTester.onclick = function(){

				$('#rhythm-area').hide();
				startAnimating();
			};
			
			var gameTrack = document.getElementById("gameTrack");
			gameTrack.onplay = function() {
				rhythmStartingTime = new Date().getTime();
			};
			
			/*
				var aud = document.getElementById("myAudio");
				aud.onplay = function() {
				    alert("The audio has started to play");
				};
				or
				<audio|video onplay="myScript">
				or
				audio|video.addEventListener("play", myScript);
			*/
			
		});
	</script> 
</html>